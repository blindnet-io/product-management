{
  "$id": "https://blindnet.io/schemas/rights-request",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  
  "title": "Data Rights Request",
  "description": "This document defines a format for interoperability of Data Rights Requests",
  
  "type": "object",
  "properties": {
        "request-id": {
            "type": "string",
            "format": "uuid"
        },
    
        "data-subject": {
            "type": "array",
            "items": { "$ref": "#/$defs/data-subject-identity" }, 
            "minItems": 1
        },
    
         "demands": {
            "type": "array",
            "items": { "$ref": "#/$defs/demand" }, 
            "minItems": 1
        },
    
        "transitivity": {
         "enum": ["DOWNWARD","UPWARD","BIDIRECTIONAL","INTRANSITIVE"] 
        },

        "date": {
            "type": "string",
            "format": "date-time"
        },

        "reply-to": {
         "enum": ["SYSTEM","USER"] 
        },
    
        "legal-grounds": {
          "type": "array",
          "items": { "type": "string" } 
        },
    
        "consent-ids": {
          "type": "array",
          "items": { 
            "type": "string",
            "format": "uuid"
          } 
        },
      "capture-ids": {
          "type": "array",
          "items": { 
            "type": "string",
            "format": "uuid"
          } 
      }

  },
  
  "required": ["rights-request-id", "timestamp"],

  "definitions": {
      
  },
  
  "$defs": {
      "data-subject-identity": {
        "$id": "/schemas/data-subject-identity",
        "$schema": "https://json-schema.org/draft/2020-12/schema#",
        "type": "object",
        
        "properties": {
          "dsid-schema": { "type": "string" },
          "dsid": { "type": "string" },
         },
        
        "required": ["dsid-schema", "dsid"],

      },
        
     "demand": {
        "$id": "/schemas/demand",
        "$schema": "https://json-schema.org/draft/2020-12/schema#",
        "type": "object",
        
        "properties": {
          "demande-id": {
            "type": "string"
          },
          
         "data-categories": {
            "enum": ["NAME",
                     "CONTACT",
                     "CONTACT.EMAIL",
                     "CONTACT.ADDRESS",
                     "CONTACT.PHONE",
                     "UID",
                     "FINANCIAL",
                     "HEALTH",
                     "IMAGE",
                     "LOCATION",
                     "DEVICE",
                     "BEHAVIOR",
                     "BEHAVIOR.CONNECTION",
                     "BEHAVIOR.ACTIVITY",
                     "BEHAVIOR.PREFERENCE",
                     "PROFILING",
                     "OTHER"] 
         },
          
          
          
        
         },
        
       

      },

}

  }
